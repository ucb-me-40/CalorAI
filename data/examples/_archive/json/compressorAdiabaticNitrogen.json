{
  "problem_title": "compressorAdiabaticNitrogen",
  "author": "tschutzius",
  "year": "Fa25",
  "difficulty_tags": [
    "easy"
  ],
  "topic": "Entropy",
  "module": "module-two",
  "workflow_tags": [
    "reviewed",
    "GSI_checked"
  ],
  "notes": ".",
  "course_reference": {
    "lecture_reference": {
      "lecture_id": "",
      "subtopics": [
        {
          "key": "Fa25-L7c-5.0",
          "title": "Air property tables: Compressor example"
        }
      ]
    },
    "book_reference": {
      "chapter_number": 7,
      "title": "Entropy",
      "sections": [
        "Isentropic Processes"
      ]
    }
  },
  "problem_statement_raw": "Nitrogen enters an adiabatic compressor at $p_1 =$ 110 kPa and $T_1 =$ 30 $^\\circ$ C and exits at $p_2 =$ 682 kPa. The process is reversible. \nGoal: Determine the work input per unit mass, $\\frac{\\dot{W}_\\text{in}}{\\dot{m}}$.",
  "schematic": "Draw a schematic that shows a compressor. Draw the control volume around the compressor. There is a single inlet and oulet for mass to flow in and out. Indicate that it is adiabatic and that work is being transferred in.",
  "physical_laws_and_assumptions": "Control Volume (mass crosses the boundary).\nNitrogen can be treated as an ideal gas. So we can use $T dS$ relations assuming constant specific heats. We can also use pyCalor to determine properties. We will do both and compare our answers.\nNeglect kinetic and potential energy ($\\Delta KE \\approx 0$, $\\Delta PE \\approx 0$).\nReversible process.\nAdiabatic process.\nSteady-flow process ($\\Delta m_\\text{CV}= 0$, $\\Delta E_\\text{CV}= 0$, $\\Delta S_\\text{CV}= 0$).\nWe have a single inlet and outlet ($\\dot{m}_\\text{in}$ and $\\dot{m}_\\text{out}$). \n1.  First Law of Thermodynamics (Energy Balance for Control Volume):\n    $$\\frac{dE_\\text{CV}}{dt} = \\dot{E}_\\text{in} - \\dot{E}_\\text{out}$$\n\n2.  Conservation of Mass (Mass Balance for a Control Volume):\n    $$\\frac{dm_\\text{CV}}{dt} = \\dot{m}_\\text{in} - \\dot{m}_\\text{out}$$\n\nSince this is a steady flow process, we can write:\n$$\\dot{E}_\\text{in} = \\dot{E}_\\text{out}$$\n\n$$\\dot{m}_\\text{in} = \\dot{m}_\\text{out} = \\dot{m}$$\n\nWe can write our conservation of energy equation as:\n$$\\dot{W}_\\text{in} + \\dot{Q}_\\text{in} + \\dot{m} \\left(h_1 + \\frac{w_1^2}{2} + g z_1 \\right) = \\dot{W}_\\text{out} + \\dot{Q}_\\text{out} + \\dot{m} \\left(h_2 + \\frac{w_1^2}{2} + g z_2 \\right)$$\n\nNeglecting kinetic and potential energy effects we can write:\n$$\\dot{W}_\\text{in} + \\dot{Q}_\\text{in} + \\dot{m} \\left(h_1 \\right) = \\dot{W}_\\text{out} + \\dot{Q}_\\text{out} + \\dot{m} \\left(h_2 \\right)$$\n\nApplying the adiabatic assumption:\n$$\\dot{W}_\\text{in} + \\dot{m} \\left(h_1 \\right) = \\dot{W}_\\text{out} + \\dot{m} \\left(h_2 \\right)$$\n\nRearranging:\n$$ \\frac{\\dot{W}_\\text{out} - \\dot{W}_\\text{in}}{\\dot{m}} = h_1 - h_2$$\n\nWe expect that work is only transferred out, so $\\dot{W}_\\text{out} = 0$. We can then write:\n\n$$\\frac{\\dot{W}_\\text{in}}{\\dot{m}} = h_2 - h_1$$\n\nWe know $h_1$ because we have the properties at state 1. We need additional information in order to determine state 2. Since the compressor is reversible and adiabatic (no heat transfer in), then the process is isentropic. Therefore:\n\n$$s_2 = s_1$$\n\nWe can use this information to determine the enthalpy at state 2. \n\nAlternative solution\n\nWe can determine the temperature at state 2 by using the $TdS$ relations. For an ideal gas undergoing an isentropic (reversible and adiabatic) process, we can write:\n\n$$\\left( \\frac{T_2}{T_1} \\right)_{s = const} = \\left(\\frac{p_2}{p_1} \\right)^{(k-1)/k} $$\n\nRecall that $k = c_p/c_v$, so to do this calculation we have to select the $k$ at some temperature. We can choose the temperature at the inlet state. By knowing $T_1$, $p_1$, and $p_2$, we can determine $T_2$. \n\nFor an ideal gas, changes in enthalpy can be expressed as:\n\n$$h_2 - h_1 = c_p \\left(T_2 - T_1 \\right) $$\n\nAgain, we have to select a specific heat at some temperature. We can take the inlet temperature.",
  "pedagogical_summary": "By separating flow work from total work to form the property enthalpy, the work term we calculate is then useful shaft work. The work out per unit mass is a simple formula: \n\n$$\\frac{\\dot{W}_\\text{in}}{\\dot{m}} = h_2 - h_1$$\n\nKey Insight: For a steady flow system undergoing an adiabatic and reversible process, this can be considered as an isentropic process. That is useful because it allows us to determine the exit state of the turbine since we also know the exit pressure. \n\nAlternative Solution If we assume ideal gas behavior, and if the process is isentropic (reversible and adiabatic) then we can write:\n\n$$\\frac{\\dot{W}_\\text{in}}{\\dot{m}} = c_p \\left( T_2 - T_1 \\right)$$\n\nFor that we have to select specific heats at a certain temperature. We chose the inlet temperature. That turned out to be a good assumption. This approach is simpler and is a good way to first solve the problem. One can check if it is a good assumption by determining actual property values using `pyCalor`.",
  "solution_code": [
    {
      "step_name": "Determine State Properties",
      "code": "## 5. Properties (Code Cell)\n!pip install pyCalor\nfrom pyCalor import thermo as th\n\n# Constants and Initial State\np1_kPa = 110 # kPa\nT1_C = 30 # C\nT1_K = T1_C + 273.15\n\np2_kPa = 682 # MPa\n\nsubstance = 'nitrogen'\n\n# Determine state 1\nst1 = th.state(substance,T=(T1_C,'C'),p=(p1_kPa,'kPa'),name='1')\ns1_kJperKgPerK = st1.s\nh1_kJperKg = st1.h\ncp_kJperKgPerK = st1.cp\ncv_kJperKgPerK = st1.cv\nk = cp_kJperKgPerK/cv_kJperKgPerK\n\n# Determine state 2\ns2_kJperKgPerK = s1_kJperKgPerK\nst2 = th.state(substance,s=(s2_kJperKgPerK,'kJ/kg K'),p=(p2_kPa,'kPa'),name='2')\nh2_kJperKg = st2.h\n\n## Alternative solution\nT2_K_alt = T1_K*(p2_kPa/p1_kPa)**((k-1)/k)"
    },
    {
      "step_name": "Calculate Work Input and Compare Methods",
      "code": "# 6 Calculations (Code Cell)\nwIn_kJperKg = h2_kJperKg - h1_kJperKg\n\nprint(f\"Work input per unit mass: {wIn_kJperKg:.2f} kJ/kg\")\n\nwIn_kJperKg_alt = cp_kJperKgPerK*(T2_K_alt - T1_K)\n\nprint(f\"Work input per unit mass assuming ideal gas and using TdS relations: {wIn_kJperKg_alt:.2f} kJ/kg\")"
    }
  ]
}